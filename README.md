# Replicable code: On Volatility and Partiesâ€™ Potential for Growth in Multiparty Systems: The Case of the 2022 Quebec Election

This README follows the guidelines for data replication of The Journal of Politics of the University of Chicago Press. These guidelines can be found here: https://www.journals.uchicago.edu/journals/jop/data-replication

This article can be replicated using R version 4.1.3. We consider opening the `article_riding-volatility.Rproj` to work in this repo.

# Packages to install
`devtools::install_github("clessn/clessnverse")`

# Ethical constraints
The surveys used in this article were exclusive, and access to the data was conditional upon signing an ethics form. As a result, the `table1_respondentsRCI` dataset presented here is a shortened version of the full dataset used in this study. If you are interested in accessing additional variables or data, please contact us at <hubert.cadieux.1@ulaval.ca> to discuss the possibility of obtaining access.

# Datasets
Information about the datasets are in the `codebook.md` file.

# Code files

## functions.R
This script contains relevant functions to the analysis. It can be sourced at the start of coding files.

## generate_table3.R
This script merges data from `data/table1_respondentsRCI`, `data/table2_duringCampaign` and `mrp/data/table_post_strat_fragility` to generate `table3_aggregatedData`. It aggregates data from `table1_respondentsRCI` and `table2_duringCampaign` at the riding-level to calculate the vote fragility index (with and without MRP) and campaign volatility for each riding. **It is not needed to run this script as `table3_aggregatedData` is already in the `data` folder**.

## figure1_rciDistribution.R
This script takes data from `table1_respondentsRCI` to generate `graphs/figure1_rciDistribution.png`.

## figure2_fragilityIndexDistribution.R
This script takes data from `table3_aggregatedData` to generate `graphs/figure2_fragilityIndexDistribution.png`.

## figure3_campaignVolatilityDistribution.R
This script takes data from `table3_aggregatedData` to generate `graphs/figure3_campaignVolatilityDistribution.png`.

## figure4_fragilityVSvolatility.R
This script takes data from `table3_aggregatedData` to generate `graphs/figure4_fragilityVSvolatility.png`.

## chi_square_test.R
This script takes data from `table3_aggregatedData` to do a chi-squared test on the fragility index generated by the MRP model. You can read [this section of *An Introduction to Political and Social Data Analysis Using R* of Thomas M. Holbrook](https://bookdown.org/tomholbrook12/bookdown-demo/hypothesis-testing-with-crosstabs.html#hypothesis-testing-with-crosstabs-1) for more documentation about the chi-squared test.